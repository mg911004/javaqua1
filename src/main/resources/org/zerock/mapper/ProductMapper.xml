<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.prg//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zerock.mapper.ProductMapper">

<!-- <select id="getList" resultType="org.zerock.domain.BoardVO">
	<![CDATA[select * from tbl_board where bno > 0]]>
	
	</select> -->	
	<select id="paging" resultType="_int">	
		<![CDATA[select count(*) from product where category1 like #{category1} and category2 like #{category2} and Title Like #{serTitle} order by ${order} desc]]>
	</select>
	
	<select id="getList" resultType="org.zerock.domain.ProductVO">
		<![CDATA[select * from (select ROWNUM as rnum, A.* from (select * from product where category1 like #{category1} and category2 like #{category2} and Title Like #{serTitle} order by ${order} desc)A) where rnum >=#{startPage} and rnum <=#{endPage} ]]>		
	</select>
	
	<insert id="insert">
		<selectKey keyProperty="bd_id" order="BEFORE" resultType="_int">
			select board_seq.nextval from dual
		</selectKey>
		<![CDATA[insert into board(bd_id, bd_num, user_id, title, content, group_num, bd_category1, bd_category2, file1)
				 values(#{bd_id}, ${bd_category2}_seq.nextval, #{user_id}, #{title}, #{content}, ${bd_category2}_group_seq.nextval, #{bd_category1}, #{bd_category2}, #{file1})]]>
	</insert>
	

	<select id="productDetail" resultType="org.zerock.domain.ProductVO">
		<![CDATA[select * from Product where pd_num = #{pd_num}]]>
	</select>
	
	<delete id="delete">
		delete board where bd_id = #{bd_id}
	</delete>
	
	<update id="update">
		update board set title= #{title}, content=#{content}, bd_category1=#{bd_category1}, file1=#{file1} where bd_id=#{bd_id}
	</update>
	<update id="updateCount">
		update board set hit=hit+1 where bd_id=#{bd_id}
	</update>
	
</mapper>
